{"version":3,"sources":["../src/updateMaterial.js"],"names":["utils","apis","onSubmit","cur","scope","currentMaterial","newMaterial","materialForm","material","name","result","materialNames","filter","length","alert","updateMaterial","id","successCallBack","failCallBack","e","preprocess","description","description2","description_optional","unit","unit_of_measure","func","submitBtnText","formTitle","showMaterialForm","showLargeModal"],"mappings":";;;;;;;;AAAYA,W;;AACAC,U;;;AAENC,c,GAAW,SAAXA,QAAW;AAAA,eAAS,YAAM;AAC9B,cAAMC,MAAMC,MAAMC,eAAlB;AACA,cAAMC,cAAcF,MAAMG,YAAN,CAAmBC,QAAvC;;AAEA,cAAIF,YAAYG,IAAZ,KAAqBN,IAAIM,IAA7B,EAAmC;AACjC,gBAAMC,SAASN,MAAMO,aAAN,CAAoBC,MAApB,CAA2B;AAAA,qBAAQH,SAASH,YAAYG,IAArB,IAA6BA,SAASN,IAAIM,IAAlD;AAAA,aAA3B,CAAf;AACA,gBAAIC,OAAOG,MAAP,IAAiB,CAArB,EAAwB;AACtBb,oBAAMc,KAAN,CAAY,SAAZ,EAAuB,WAAvB,EAAoC,gDAApC;AACA;AACD;AACF;;AAEDb,eAAKc,cAAL,CACEZ,IAAIa,EADN,EAEEV,WAFF,EAGEN,MAAMiB,eAAN,CAAsB,6BAAtB,EAAqD,wCAArD,EAA+Fb,KAA/F,CAHF,EAIE;AAAA,mBAAKJ,MAAMkB,YAAN,CAAmB,6BAAnB,wDAAsGC,CAAtG,wBAAL;AAAA,WAJF;AAMD,SAlBgB;AAAA,O;;AAoBXC,gB,GAAa,SAAbA,UAAa,QAAS;AAC1B,YAAMjB,MAAMC,MAAMC,eAAlB;AACAD,cAAMG,YAAN,GAAqB;AACnBC,oBAAU;AACRQ,gBAAKb,IAAIa,EADD;AAERK,yBAAalB,IAAIkB,WAFT;AAGRC,0BAAcnB,IAAIoB,oBAHV;AAIRC,kBAAMrB,IAAIsB,eAJF;AAKRhB,kBAAMN,IAAIM;AALF,WADS;AAQnBiB,gBAAM;AACJxB,sBAAUA,SAASE,KAAT;AADN,WARa;AAWnBuB,yBAAe,QAXI;AAYnBC,qBAAW;AAZQ,SAArB;AAcD,O;;kCAEYC,gB,GAAmB,SAAnBA,gBAAmB,QAAS;AACvCT,mBAAWhB,KAAX;AACAJ,cAAM8B,cAAN,CAAqB,oBAArB,EAA2C1B,KAA3C;AACD,O","file":"updateMaterial.js","sourcesContent":["import * as utils from './utils'\nimport * as apis from './apis'\n\nconst onSubmit = scope => () => {\n  const cur = scope.currentMaterial\n  const newMaterial = scope.materialForm.material\n\n  if (newMaterial.name !== cur.name) {\n    const result = scope.materialNames.filter(name => name === newMaterial.name && name !== cur.name)\n    if (result.length >= 1) {\n      utils.alert('warning', 'Id exists', 'The ID of the material you are updating exists')\n      return\n    }\n  }\n\n  apis.updateMaterial(\n    cur.id, \n    newMaterial,\n    utils.successCallBack('mct-material-form-cancelBtn', 'Material has been updated successfully', scope),\n    e => utils.failCallBack('mct-material-form-cancelBtn', `Error occurred when updating the material due to ${e}, please try again`)\n  )\n}\n\nconst preprocess = scope => {\n  const cur = scope.currentMaterial\n  scope.materialForm = {\n    material: {\n      id : cur.id,\n      description: cur.description,\n      description2: cur.description_optional,\n      unit: cur.unit_of_measure,\n      name: cur.name\n    },\n    func: {\n      onSubmit: onSubmit(scope)\n    },\n    submitBtnText: 'Update',\n    formTitle: 'Update Material'\n  }\n}\n\nexport const showMaterialForm = scope => {\n  preprocess(scope)\n  utils.showLargeModal('material_form.html', scope)\n}"]}